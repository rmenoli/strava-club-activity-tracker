<!DOCTYPE html>
<html>
<head>
    <title>Settings - Strava Club Activity Tracker</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <h1>âš™ï¸ Settings</h1>

        <div class="nav-links">
            <a href="/admin">ğŸ  Admin Dashboard</a>
            <a href="/admin/date-filters">ğŸ“… Date Filters</a>
            <a href="/">ğŸƒ Main App</a>
            <a href="#" onclick="window.location.reload()">ğŸ”„ Refresh</a>
        </div>

        <div class="section">
            <h2>ğŸ“Š Activity Display Settings</h2>

            <div class="default-info">
                <h4>ğŸ“… Current Activity Filter Period:</h4>
                <p><strong>{{ activity_filter_days }} days</strong></p>
                <p><em>Activities from the last {{ activity_filter_days }} days will be included in statistics and displayed on the dashboard.</em></p>

                <h4 style="margin-top: 20px;">ğŸ Current Discount Access Threshold:</h4>
                <p><strong>{{ discount_threshold }} activities</strong></p>
                <p><em>Athletes need {{ discount_threshold }} or more activities to access the discount features.</em></p>
            </div>

            <form method="post" action="/admin/settings/update">
                <div class="form-group">
                    <label for="activity_filter_days">Activity Filter Period (days):</label>
                    <input type="number" id="activity_filter_days" name="activity_filter_days"
                           value="{{ activity_filter_days }}"
                           min="1" max="365" required>
                    <div class="help-text">Number of days of activity history to include (1-365 days)</div>
                </div>

                <div class="form-group">
                    <label for="discount_threshold">Discount Access Threshold (activities):</label>
                    <input type="number" id="discount_threshold" name="discount_threshold"
                           value="{{ discount_threshold }}"
                           min="1" max="100" required>
                    <div class="help-text">Minimum number of activities required to access discount features (1-100 activities)</div>
                </div>

                <button type="submit" class="btn">ğŸ’¾ Update Settings</button>
            </form>
        </div>

        <div class="section">
            <h2>ğŸ’¡ How These Settings Work</h2>

            <h4>Activity Filtering:</h4>
            <ul>
                <li><strong>Time-Based Filter:</strong> Only activities from the last N days are included in dashboard statistics</li>
                <li><strong>Location Filter:</strong> Activities are also filtered by GPS location (start and end points must be within the configured radius)</li>
                <li><strong>Combined Filtering:</strong> Both time and location filters must pass for an activity to be counted</li>
                <li><strong>Dashboard Impact:</strong> The "Total Activities", "Total Distance", and "Total Moving Time" stats reflect only filtered activities</li>
            </ul>

            <h4>Discount Access Threshold:</h4>
            <ul>
                <li><strong>Button Visibility:</strong> The "Visualize Discounts" button is always visible on the dashboard</li>
                <li><strong>Access Control:</strong> Athletes with fewer activities than the threshold see a disabled (grayed out) button</li>
                <li><strong>Unlock Message:</strong> Displays how many activities are needed to unlock the feature</li>
                <li><strong>Gamification:</strong> Encourages athletes to stay active and reach the threshold</li>
            </ul>

            <h4>ğŸ“ Common Settings:</h4>
            <ul>
                <li><strong>7 days:</strong> Weekly activity summary</li>
                <li><strong>30 days:</strong> Monthly activity review</li>
                <li><strong>90 days:</strong> Quarterly tracking (default)</li>
                <li><strong>180 days:</strong> Semi-annual review</li>
                <li><strong>365 days:</strong> Full year tracking</li>
            </ul>

            <h4>âš ï¸ Note:</h4>
            <p>This setting affects what activities are displayed on the dashboard and included in statistics. It does not affect which activities are synced from Strava or stored in the database - all activities are always synced and stored.</p>
        </div>
    </div>
</body>
</html>
